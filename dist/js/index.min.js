var i,product,topTenCarouselInitial,onSaleCarouselInitial,popularProdsCarouselInitial,top10CarouselJS=document.querySelector(".js-top-ten-carousel"),indexBannerTop=document.getElementById("index-banner-top"),indexBannerTopImg=indexBannerTop.getElementsByTagName("img")[0],indexBannerZone2Banner1=document.getElementById("index-banner-mid-large"),indexBannerZone2Banner1Img=indexBannerZone2Banner1.getElementsByTagName("img")[0],indexBannerZone2Banner2=document.getElementById("index-banner-mid-small"),indexBannerZone2Banner2Img=indexBannerZone2Banner2.getElementsByTagName("img")[0],indexBannerZone3=document.getElementById("index-banner-bottom"),indexBannerZone3Banner1=indexBannerZone3.getElementsByTagName("img")[0],bbBrand="bb:brand",bbPromos="bb:promotions",bbSkuGroups="bb:skugroups",bbSkuImage="bb:image",bbElite="bb:b-elite-badge",bbTarget="bb:target";function GetProduct(e){var n=e;n.hasOwnProperty("brandName")?(this.productName=n.displayTitle.split(" - ")[0],this.brandName=n.brandName):(this.productName=n.name,this.brandName=n._embedded[bbBrand].label),this.comboName=function(){return this.productName+" "+this.brandName},this.imgURL=n._links[bbSkuImage][0].href.replace("{?resolution}","").replace("_450_","_130_"),this.ratingValue=function(){try{if(n.rating.hasOwnProperty("count"))return"10.0"===n.rating.value.toFixed(1)?["10",n.rating.count.toLocaleString()]:[n.rating.value.toFixed(1),n.rating.count.toLocaleString()]}catch(e){return["N/A","0"]}};try{this.pageURL=n._links[bbTarget].href}catch(e){this.pageURL=n._links.canonical.href}this.violator=function(){if(n.hasOwnProperty("violators"))try{return!!n.violators[0].hasOwnProperty("text")&&[n.violators[0].text,n.violators[0].color]}catch(e){return!1}else if(n.hasOwnProperty("violator"))try{for(i=0;i<n._embedded[bbSkuGroups]._embedded.item.length;i+=1)return"null"!==n._embedded[bbSkuGroups]._embedded.item[i].title&&[n._embedded[bbPromos]._embedded.item[i].title,"green"]}catch(e){return!1}},this.freeShipping=function(){try{return!!n._links.hasOwnProperty(bbElite)}catch(e){return!1}},this.createCell=function(e){var n,t=document.createElement("a"),r=document.createElement("div"),o=document.createElement("img"),a=document.createElement("div"),i=document.createElement("div"),l=document.createElement("h3"),s=document.createElement("h3"),d=document.createElement("h4"),c=document.createElement("img"),u=document.createElement("div");t.setAttribute("href",this.pageURL),t.classList.add("product"),r.classList.add("product__img-wrapper"),a.classList.add("carousel__productText"),i.classList.add("vio-text"),s.classList.add("product__brand"),u.classList.add("product__rating__review-badge"),d.classList.add("product__name"),o.setAttribute("src",this.imgURL),o.setAttribute("alt",this.productName),t.appendChild(r),r.appendChild(o),a.appendChild(i),i.appendChild(l),a.appendChild(d),a.appendChild(s),t.appendChild(a),!1!==this.violator()?(n=this.violator()[1],l.innerHTML=this.violator()[0],i.style.backgroundImage="url("+indexOptions.vioTagImg+")","green"===n||"vio-green"===n?l.style.color="#62bd19":"green"===n&&"vio-green"===n||(l.style.color=n,i.style.backgroundImage="none",i.style.paddingLeft=0)):l.innerHTML="",s.innerHTML=this.brandName,d.innerHTML=this.productName,u.innerHTML=this.ratingValue()[0],r.appendChild(u),!0===this.freeShipping()&&(c.setAttribute("src",indexOptions.freeShipImg),c.classList.add("product__free-shipping-badge"),a.appendChild(c)),e.appendChild(t)}}var utilities={fadeOut:function(e){e.classList.add("index__fade")},fadeIn:function(e){e.classList.remove("index__fade")},unwrap:function(e){for(var n,t=document.createDocumentFragment();e.firstChild;)n=e.removeChild(e.firstChild),t.appendChild(n);e.parentNode.replaceChild(t,e)},removeChildren:function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},imgLoad:function(e){return!!e.complete&&(void 0===e.naturalWidth||0!==e.naturalWidth)},loadBanners:function(){var e;e=1e3<window.innerWidth?countrySpecificData.desktop:countrySpecificData.mobile;try{1<=e.zone1Banner1URL.length||1<=e.zone1Banner1Link.length?(indexBannerTopImg.src=e.zone1Banner1URL,indexBannerTop.setAttribute("href",e.zone1Banner1Link)):(indexBannerTopImg.src=indexOptions.zone1Banner1FallbackImg,indexBannerTop.setAttribute("href",indexOptions.zone1Banner1FallbackLink),console.error("Applying Fallback Image For Banner 1 | Please Check User Inputed Code For Errors"))}catch(e){console.log("Error With Banner - indexBannerZone1 - Please Check Content Regions Are Correct in ExpMan")}try{1<=e.zone2Banner1URL.length||1<=e.zone2Banner1Link.length?(indexBannerZone2Banner1Img.src=e.zone2Banner1URL,indexBannerZone2Banner1.setAttribute("href",e.zone2Banner1Link)):(indexBannerZone2Banner1Img.src=indexOptions.zone2Banner1FallbackImg,indexBannerZone2Banner1.setAttribute("href",indexOptions.zone2Banner1FallbackLink),console.error("Applying Fallback Image For Banner 2 - Large | Please Check User Inputed Code For Errors"))}catch(e){console.log("Error With Banner - indexBannerZone2 - Please Check Content Regions Are Correct in ExpMan")}try{1<=e.zone2Banner2URL.length||1<=e.zone2Banner2Link.length?(console.log(e.zone2Banner2URL),indexBannerZone2Banner2Img.src=e.zone2Banner2URL,indexBannerZone2Banner2.setAttribute("href",e.zone2Banner2Link)):(indexBannerZone2Banner2Img.src=indexOptions.zone2Banner2FallbackImg,indexBannerZone2Banner2.setAttribute("href",indexOptions.zone2Banner2FallbackLink),console.error("Applying Fallback Image For Banner 2 - Small | Please Check User Inputed Code For Errors"))}catch(e){console.log("Error With Banner - indexBannerZone2 - Please Check Content Regions Are Correct in ExpMan")}try{1<=e.zone3Banner1URL.length||1<=e.zone3Banner1Link.length?(indexBannerZone3Banner1.src=e.zone3Banner1URL,indexBannerZone3.setAttribute("href",e.zone3Banner1Link)):(indexBannerZone3Banner1.src=indexOptions.zone3Banner1FallbackImg,indexBannerZone3.setAttribute("href",indexOptions.zone3Banner1FallbackLink),console.error("Applying Fallback Image For Banner 3 | Please Check User Inputed Code For Errors"))}catch(e){console.log("Error With Banner - indexBannerZone3 - Please Check Content Regions Are Correct in ExpMan")}},dataRequest:function(e,n,t){(0<=window.location.href.indexOf("127")||0<=window.location.href.indexOf("localhost"))&&(e="https://www.bodybuilding.com"+e);var r,o,a=new XMLHttpRequest;try{a.onreadystatechange=function(){if(4===a.readyState){var e=JSON.parse(a.responseText);if("dynamic"===t){for(r=e._embedded.item,o=50===r.length?indexOptions.numOfTopSellingToShow:r.length,i=0;i<o;i+=1)r[i].hasOwnProperty("displayTitle")&&(product=new GetProduct(r[i])).createCell(n);new Carousel({appendTo:".js-top-ten-carousel",cellsToShow:4,slidesPerClick:4,mobileAt:"918px",dots:!0})}else"static"===t&&(product=new GetProduct(r=e)).createCell(n)}},a.open("GET",e,!1),a.setRequestHeader("Accept","application/hal+json"),a.setRequestHeader("BB-App","marketing, 1.0.0"),a.send(null)}catch(e){console.log("Error With Data Request")}}};!function(){utilities.loadBanners(),document.querySelector(".js-sales-specials-link").setAttribute("href",indexOptions.salesSpecialsURL),document.querySelector(".js-top-selling-link").setAttribute("href",indexOptions.topSellingURL),document.querySelector(".js-top-categories-link").setAttribute("href",indexOptions.topCatURL),document.querySelector(".js-top-brands-link").setAttribute("href",indexOptions.topBrandsURL),topTenCarouselInitial=new Carousel({appendTo:".js-top-ten-carousel",cellsToShow:4,slidesPerClick:4,mobileAt:"1000px",dots:!0}),onSaleCarouselInitial=new Carousel({appendTo:".js-on-sale-carousel",arrows:!1,mobileAt:"900px",dots:!1}),popularProdsCarouselInitial=new Carousel({appendTo:".js-top-selling-carousel",mobileAt:"900px",dots:!0});var e=[document.querySelector(".js-top-ten-carousel"),document.querySelector(".js-top-selling-carousel"),document.querySelector(".js-on-sale-carousel")];try{var n;for(i=0;i<e.length;i+=1)for(n=0;n<e[i].children.length;n+=1){var t=e[i].children[n];if(null===t.querySelector(".vio-text")&&null===t.querySelector(".carousel__productVio__container")){var r=document.createElement("div");r.classList.add("carousel__productVio__container"),r.style.order="2",r.style.minHeight="20px",t.querySelector(".top10__img-wrapper").parentNode.insertBefore(r,t.querySelector(".top10__img-wrapper").nextSibling)}t.removeAttribute("id")}}catch(e){console.log(e)}NodeList.prototype.forEach||Object.defineProperty(NodeList.prototype,"forEach",{value:Array.prototype.forEach,enumerable:!0,configurable:!0,writable:!0})}(),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".carousel__categories__inner")[0].querySelectorAll("[data-type]");for(i=0;i<e.length;i+=1)e[i].addEventListener("click",function(e){e=e||window.event;var n=this.getAttribute("href"),t=e.currentTarget.getAttribute("data-type");null==n&&(e.preventDefault(),document.querySelector(".carousel__categories").querySelectorAll("a").forEach(function(e){e.classList.remove("selected")}),Object.getOwnPropertyNames(indexOptions.topTenPages).forEach(function(e){e===t&&setTimeout(function(){topTenCarouselInitial.destroy();var e=document.createElement("div");e.classList.add("js-top-ten-carousel"),document.querySelector(".top__ten").appendChild(e),utilities.dataRequest(indexOptions.topTenPages[t].source,document.querySelector(".js-top-ten-carousel"),"dynamic"),document.querySelector(".js-top-10-header-text").textContent=indexOptions.topTenPages[t].viewAllName,document.querySelector(".js-top-ten-see-all-text").textContent=indexOptions.topTenPages[t].viewAllName,document.querySelector(".js-top-ten-see-all-link").setAttribute("href",indexOptions.topTenPages[t].viewAll);var n=document.querySelector(".js-top-ten-carousel");1<=indexOptions.topTenPages[t].addProd.length&&(utilities.dataRequest(indexOptions.topTenPages[t].addProd,n,"static",!1),n.removeChild(n.lastChild.previousSibling))},150)})),e.currentTarget.classList.add("selected")});for(i=0;i<document.querySelectorAll(".product").length;i+=1)document.querySelectorAll(".product")[i].removeAttribute("id");window.addEventListener("resize",function(){utilities.loadBanners()})}),window.onload=function(){var e=[indexBannerTopImg,indexBannerZone2Banner2Img,indexBannerZone2Banner1Img,indexBannerZone3Banner1];for(i=0;i<e.length;i+=1)utilities.imgLoad(e[i])||(e[i]===indexBannerTopImg?(indexBannerTopImg.src=indexOptions.zone1Banner1FallbackImg,indexBannerTop.setAttribute("href",indexOptions.zone1Banner1FallbackLink),console.error("Applying Fallback Image For Banner 1 | Please Check User Inputed Code For Errors")):e[i]===indexBannerZone2Banner2Img?(indexBannerZone2Banner2Img.src=indexOptions.zone2Banner2FallbackImg,indexBannerZone2Banner2.setAttribute("href",indexOptions.zone2Banner2FallbackLink),console.error("Applying Fallback Image For Banner 2 - Small | Please Check User Inputed Code For Errors")):e[i]===indexBannerZone2Banner1Img?(indexBannerZone2Banner1Img.src=indexOptions.zone2Banner1FallbackImg,indexBannerZone2Banner1.setAttribute("href",indexOptions.zone2Banner1FallbackLink),console.error("Applying Fallback Image For Banner 2 - Large | Please Check User Inputed Code For Errors")):e[i]===indexBannerZone3Banner1&&(indexBannerZone3Banner1.src=indexOptions.zone3Banner1FallbackImg,indexBannerZone3.setAttribute("href",indexOptions.zone3Banner1FallbackLink),console.error("Applying Fallback Image For Banner 3 | Please Check User Inputed Code For Errors")))};