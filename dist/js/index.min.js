var i,product,top10CarouselWHeader=document.querySelector(".carousel__container__outer__top-ten"),top10CarouselJS=document.querySelector(".js-top-ten-carousel"),top10HeaderText=document.querySelector(".js-top-10-header-text"),top10SeeAllText=document.querySelector(".js-top-ten-see-all-text"),indexBannerTop=document.getElementById("index-banner-top"),indexBannerTopImg=indexBannerTop.getElementsByTagName("img")[0],indexBannerZone2Banner1=document.getElementById("index-banner-mid-large"),indexBannerZone2Banner1Img=indexBannerZone2Banner1.getElementsByTagName("img")[0],indexBannerZone2Banner2=document.getElementById("index-banner-mid-small"),indexBannerZone2Banner2Img=indexBannerZone2Banner2.getElementsByTagName("img")[0],indexBannerZone3=document.getElementById("index-banner-bottom"),indexBannerZone3Banner1=indexBannerZone3.getElementsByTagName("img")[0],bbBrand="bb:brand",bbPromos="bb:promotions",bbSkuGroups="bb:skugroups",bbSkuImage="bb:image",bbElite="bb:b-elite-badge",bbTarget="bb:target";function GetProduct(e){var n=e;n.hasOwnProperty("brandName")?(this.productName=n.displayTitle.split(" - ")[0],this.brandName=n.brandName):(this.productName=n.name,this.brandName=n._embedded[bbBrand].label),this.comboName=function(){return this.productName+" "+this.brandName},this.imgURL=n._links[bbSkuImage][0].href.replace("{?resolution}","").replace("_450_","_130_"),this.ratingValue=function(){try{if(n.rating.hasOwnProperty("count"))return"10.0"===n.rating.value.toFixed(1)?["10",n.rating.count.toLocaleString()]:[n.rating.value.toFixed(1),n.rating.count.toLocaleString()]}catch(e){return["N/A","0"]}};try{this.pageURL=n._links[bbTarget].href}catch(e){this.pageURL=n._links.canonical.href}this.violator=function(){if(n.hasOwnProperty("violators"))try{return!!n.violators[0].hasOwnProperty("text")&&[n.violators[0].text,n.violators[0].color]}catch(e){return!1}else if(n.hasOwnProperty("violator"))try{for(i=0;i<n._embedded[bbSkuGroups]._embedded.item.length;i+=1)return"null"!==n._embedded[bbSkuGroups]._embedded.item[i].title&&[n._embedded[bbPromos]._embedded.item[i].title,"green"]}catch(e){return!1}},this.freeShipping=function(){try{return!!n._links.hasOwnProperty(bbElite)}catch(e){return!1}},this.createCell=function(e){var n,t=document.createElement("a"),r=document.createElement("div"),o=document.createElement("img"),a=document.createElement("div"),i=document.createElement("div"),l=document.createElement("h3"),d=document.createElement("h3"),s=document.createElement("h4"),c=document.createElement("img"),u=document.createElement("div");t.setAttribute("href",this.pageURL),t.classList.add("carousel__product"),r.classList.add("carousel__productImgDiv"),a.classList.add("carousel__productText"),i.classList.add("carousel__productVio"),d.classList.add("productBrandName"),u.classList.add("carousel__productReviewsNum"),s.classList.add("product__name"),o.setAttribute("src",this.imgURL),o.setAttribute("alt",this.productName),t.appendChild(r),r.appendChild(o),a.appendChild(i),i.appendChild(l),a.appendChild(d),a.appendChild(s),r.prepend(u),t.appendChild(a),!1!==this.violator()?(n=this.violator()[1],l.innerHTML=this.violator()[0],i.style.backgroundImage="url("+indexOptions.vioTagImg+")","green"===n||"vio-green"===n?l.style.color="#62bd19":"green"===n&&"vio-green"===n||(l.style.color=n,i.style.backgroundImage="none",i.style.paddingLeft=0)):l.innerHTML="",d.innerHTML=this.brandName,s.innerHTML=this.productName,u.innerHTML=this.ratingValue()[0],!0===this.freeShipping()&&(c.setAttribute("src",indexOptions.freeShipImg),c.classList.add("freeShipLogo"),a.appendChild(c)),e.appendChild(t)}}var utilities={fadeOut:function(e){e.classList.add("index__fade")},fadeIn:function(e){e.classList.remove("index__fade")},unwrap:function(e){for(var n,t=document.createDocumentFragment();e.firstChild;)n=e.removeChild(e.firstChild),t.appendChild(n);e.parentNode.replaceChild(t,e)},removeChildren:function(e){for(console.log(e);e.hasChildNodes();)e.removeChild(e.lastChild)},imgLoad:function(e){return!!e.complete&&(void 0===e.naturalWidth||0!==e.naturalWidth)},loadBanners:function(){var e;1<=(e=800<window.innerWidth?countrySpecificData.desktop:countrySpecificData.mobile).zone1Banner1URL.length||1<=e.zone1Banner1Link.length?(indexBannerTopImg.src=e.zone1Banner1URL,indexBannerTop.setAttribute("href",e.zone1Banner1Link)):(indexBannerTopImg.src=indexOptions.zone1Banner1FallbackImg,indexBannerTop.setAttribute("href",indexOptions.zone1Banner1FallbackLink),console.error("Applying Fallback Image For Banner 1 | Please Check User Inputed Code For Errors")),1<=e.zone2Banner1URL.length||1<=e.zone2Banner1Link.length?(indexBannerZone2Banner1Img.src=e.zone2Banner1URL,indexBannerZone2Banner1.setAttribute("href",e.zone2Banner1Link)):(indexBannerZone2Banner1Img.src=indexOptions.zone2Banner1FallbackImg,indexBannerZone2Banner1.setAttribute("href",indexOptions.zone2Banner1FallbackLink),console.error("Applying Fallback Image For Banner 2 - Large | Please Check User Inputed Code For Errors")),1<=e.zone2Banner2URL.length||1<=e.zone2Banner2Link.length?(indexBannerZone2Banner2Img.src=e.zone2Banner2URL,indexBannerZone2Banner2.setAttribute("href",e.zone2Banner2Link)):(indexBannerZone2Banner2Img.src=indexOptions.zone2Banner2FallbackImg,indexBannerZone2Banner2.setAttribute("href",indexOptions.zone2Banner2FallbackLink),console.error("Applying Fallback Image For Banner 2 - Small | Please Check User Inputed Code For Errors")),1<=e.zone3Banner1URL.length||1<=e.zone3Banner1Link.length?(indexBannerZone3Banner1.src=e.zone3Banner1URL,indexBannerZone3.setAttribute("href",e.zone3Banner1Link)):(indexBannerZone3Banner1.src=indexOptions.zone3Banner1FallbackImg,indexBannerZone3.setAttribute("href",indexOptions.zone3Banner1FallbackLink),console.error("Applying Fallback Image For Banner 3 | Please Check User Inputed Code For Errors"))},carouselInit:function(n,e){tns({container:n,items:e,slideBy:e,gutter:6,controlsText:["",""],nav:!1,controls:!0,loop:!1,responsive:{1000:{edgePadding:30,nav:!0}},onInit:function(){var e=n.parentNode;try{utilities.fadeIn(document.querySelector(".js-top-ten-carousel")),e.classList.contains("index__fade")&&utilities.fadeIn(e)}catch(e){console.log("Error With Carousel Loading - Initialization Failed")}}})},dataRequest:function(e,n,t,r){(0<=window.location.href.indexOf("127")||0<=window.location.href.indexOf("localhost"))&&(e="https://uk.bodybuilding.com"+e);var o,a,l=new XMLHttpRequest;try{l.onreadystatechange=function(){if(4===l.readyState){var e=JSON.parse(l.responseText);if(console.log(e),"dynamic"===t)for(o=e._embedded.item,a=50===o.length?indexOptions.numOfTopSellingToShow:o.length,i=0;i<a;i+=1)o[i].hasOwnProperty("displayTitle")&&(product=new GetProduct(o[i])).createCell(n);else"static"===t&&(product=new GetProduct(o=e)).createCell(n);1e3<window.innerWidth?!1!==r&&10<=n.querySelectorAll(".carousel__product").length&&utilities.carouselInit(n,r):n.classList.remove("index__fade")}},l.open("GET",e,!1),l.setRequestHeader("Accept","application/hal+json"),l.setRequestHeader("BB-App","marketing, 1.0.0"),l.send(null)}catch(e){console.log("Error With Data Request")}}};!function(){utilities.loadBanners(),document.querySelector(".js-sales-specials-link").setAttribute("href",indexOptions.salesSpecialsURL),document.querySelector(".js-top-selling-link").setAttribute("href",indexOptions.topSellingURL),document.querySelector(".js-top-categories-link").setAttribute("href",indexOptions.topCatURL),document.querySelector(".js-top-brands-link").setAttribute("href",indexOptions.topBrandsURL),1e3<window.innerWidth&&(utilities.carouselInit(document.querySelector(".js-top-ten-carousel"),4),utilities.carouselInit(document.querySelector(".js-top-selling-carousel"),5));var e=[document.querySelector(".js-top-ten-carousel"),document.querySelector(".js-top-selling-carousel")];try{for(i=0;i<e.length;i+=1)for(r=0;r<e[i].children.length;r+=1)if(null===e[i].children[r].querySelector(".vio-text")){var n=document.createElement("div");n.classList.add("carousel__productVio__container"),n.style.order="2",n.style.minHeight="20px",e[i].children[r].querySelector(".top10__img-wrapper").parentNode.insertBefore(n,e[i].children[r].querySelector(".top10__img-wrapper").nextSibling)}}catch(e){console.log(e)}}(),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".carousel__categories__inner")[0].querySelectorAll("[data-type]");for(i=0;i<e.length;i+=1)e[i].addEventListener("click",function(e){e=e||window.event;var n=this.getAttribute("href"),t=e.currentTarget.getAttribute("data-type");null==n&&(e.preventDefault(),document.querySelector(".carousel__categories").querySelectorAll("a").forEach(function(e){e.classList.remove("selected")}),utilities.fadeOut(top10CarouselWHeader),Object.getOwnPropertyNames(indexOptions.topTenPages).forEach(function(e){e===t&&setTimeout(function(){1e3<window.innerWidth?document.querySelector(".carousel__container__outer__top-ten").querySelector(".tns-outer").outerHTML="":document.querySelector(".js-top-ten-carousel").outerHTML="";var e=document.createElement("div");e.classList.add("carousel__main","js-top-ten-carousel","index__fade","index__animatedOnLoad"),document.querySelector(".js-carousel-append").appendChild(e);var n=document.querySelector(".js-top-ten-carousel");utilities.dataRequest(indexOptions.topTenPages[t].source,n,"dynamic",4),document.querySelector(".js-top-10-header-text").textContent=indexOptions.topTenPages[t].viewAllName,document.querySelector(".js-top-ten-see-all-text").textContent=indexOptions.topTenPages[t].viewAllName,document.querySelector(".js-top-ten-see-all-link").setAttribute("href",indexOptions.topTenPages[t].viewAll),1<=indexOptions.topTenPages[t].addProd.length&&(utilities.dataRequest(indexOptions.topTenPages[t].addProd,n,"static",!1),n.removeChild(n.lastChild.previousSibling)),utilities.fadeIn(top10CarouselWHeader)},350)})),e.currentTarget.classList.add("selected")});window.addEventListener("resize",function(){utilities.loadBanners()})}),window.onload=function(){var e=[indexBannerTopImg,indexBannerZone2Banner2Img,indexBannerZone2Banner1Img,indexBannerZone3Banner1];for(i=0;i<e.length;i+=1)utilities.imgLoad(e[i])||(e[i]===indexBannerTopImg?(indexBannerTopImg.src=indexOptions.zone1Banner1FallbackImg,indexBannerTop.setAttribute("href",indexOptions.zone1Banner1FallbackLink),console.error("Applying Fallback Image For Banner 1 | Please Check User Inputed Code For Errors")):e[i]===indexBannerZone2Banner2Img?(indexBannerZone2Banner2Img.src=indexOptions.zone2Banner2FallbackImg,indexBannerZone2Banner2.setAttribute("href",indexOptions.zone2Banner2FallbackLink),console.error("Applying Fallback Image For Banner 2 - Small | Please Check User Inputed Code For Errors")):e[i]===indexBannerZone2Banner1Img?(indexBannerZone2Banner1Img.src=indexOptions.zone2Banner1FallbackImg,indexBannerZone2Banner1.setAttribute("href",indexOptions.zone2Banner1FallbackLink),console.error("Applying Fallback Image For Banner 2 - Large | Please Check User Inputed Code For Errors")):e[i]===indexBannerZone3Banner1&&(indexBannerZone3Banner1.src=indexOptions.zone3Banner1FallbackImg,indexBannerZone3.setAttribute("href",indexOptions.zone3Banner1FallbackLink),console.error("Applying Fallback Image For Banner 3 | Please Check User Inputed Code For Errors")))},console.groupEnd("Store Index");